<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시글 작성 - 우도도서관</title>
    <!-- Google Fonts - Noto Sans KR -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Summernote CSS -->
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../css/styles.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="home.html">우도도서관</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#">자료검색</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">이용안내</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="#">게시판</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">도서관소개</a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="login.html">로그인</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="signup.html">회원가입</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Form Content -->
    <div class="post-form-container">
        <div class="post-form-header">
            <h2>도서 문의 게시글 작성</h2>
        </div>
        
        <form id="postForm">
            <div class="mb-4">
                <div class="form-check form-check-inline mb-3">
                    <input class="form-check-input" type="radio" name="bookSelectionType" id="borrowedBooks" value="borrowed" checked>
                    <label class="form-check-label" for="borrowedBooks">나의 대여 도서 조회</label>
                </div>
                <div class="form-check form-check-inline mb-3">
                    <input class="form-check-input" type="radio" name="bookSelectionType" id="bookSearch" value="search">
                    <label class="form-check-label" for="bookSearch">도서 검색</label>
                </div>
            </div>

            <div class="mb-4" id="borrowedBooksSection">
                <label for="borrowedBookSelect" class="form-label required">대여 중인 도서</label>
                <select class="form-select" id="borrowedBookSelect" required>
                    <option value="">대여 중인 도서를 선택하세요</option>
                    <option value="1">파이썬 프로그래밍 입문</option>
                    <option value="2">데이터 분석의 기초</option>
                    <option value="3">웹 개발 실전 가이드</option>
                </select>
            </div>

            <div class="mb-4 d-none" id="bookSearchSection">
                <label for="bookSearch" class="form-label required">도서 검색</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="bookSearch" placeholder="도서명을 입력하세요">
                    <button class="btn btn-outline-secondary" type="button" id="searchButton">
                        <i class="fas fa-search"></i> 검색
                    </button>
                </div>
                <div class="mt-2" id="searchResults">
                    <!-- 검색 결과가 여기에 표시됩니다 -->
                </div>
            </div>
            
            <div class="mb-4">
                <label for="title" class="form-label required">문의 도서</label>
                <input type="text" class="form-control" id="title" required readonly>
            </div>
            
            <div class="mb-4">
                <label for="postTitle" class="form-label required">게시글 제목</label>
                <input type="text" class="form-control" id="postTitle" placeholder="게시글 제목을 입력하세요" required>
            </div>
            
            <div class="mb-4">
                <label for="content" class="form-label required">내용</label>
                <textarea id="content" class="form-control"></textarea>
            </div>
            
            <div class="mb-4">                
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="allowComments" checked>
                    <label class="form-check-label" for="allowComments">
                        댓글 허용
                    </label>
                </div>
            </div>

            <div class="mb-4">
                <label class="form-label">공개 설정</label>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="visibility" id="publicPost" value="public" checked>
                    <label class="form-check-label" for="publicPost">
                        공개
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="visibility" id="privatePost" value="private">
                    <label class="form-check-label" for="privatePost">
                        비공개
                    </label>
                </div>
            </div>
            
            <div class="btn-container">
                <button type="submit" class="btn btn-primary btn-submit">등록</button>
                <button type="button" class="btn btn-secondary btn-cancel" onclick="history.back()">취소</button>
            </div>
        </form>
    </div>

    <!-- Footer -->
    <footer class="footer mt-5">
        <div class="container">
            <div class="text-center">
                <small class="text-muted">&copy; 2024 우도도서관. All rights reserved.</small>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Summernote JS -->
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/lang/summernote-ko-KR.min.js"></script>
    
    <script>
        $(document).ready(function() {
            // Initialize Summernote
            $('#content').summernote({
                height: 400,
                minHeight: 300,
                lang: 'ko-KR',
                toolbar: [
                    ['style', ['style']],
                    ['font', ['bold', 'underline', 'clear']],
                    ['color', ['color']],
                    ['para', ['ul', 'ol', 'paragraph']],
                    ['table', ['table']],
                    ['insert', ['link']],
                    ['view', ['fullscreen', 'codeview', 'help']]
                ]
            });

            // 라디오 버튼 변경 시 섹션 전환
            $('input[name="bookSelectionType"]').change(function() {
                if ($(this).val() === 'borrowed') {
                    $('#borrowedBooksSection').removeClass('d-none');
                    $('#bookSearchSection').addClass('d-none');
                    $('#borrowedBookSelect').prop('required', true);
                    $('#bookSearch').prop('required', false);
                } else {
                    $('#borrowedBooksSection').addClass('d-none');
                    $('#bookSearchSection').removeClass('d-none');
                    $('#borrowedBookSelect').prop('required', false);
                    $('#bookSearch').prop('required', true);
                }
            });

            // 대여 도서 선택 시 문의 도서 필드 업데이트
            $('#borrowedBookSelect').change(function() {
                const selectedOption = $(this).find('option:selected');
                $('#title').val(selectedOption.text());
            });

            // 도서 검색 기능
            $('#searchButton').click(function() {
                const searchTerm = $('#bookSearch').val().trim();
                if (searchTerm) {
                    // 여기에 실제 검색 API 호출 코드가 들어갈 수 있습니다
                    // 임시 검색 결과 표시
                    $('#searchResults').html(`
                        <div class="list-group">
                            <a href="#" class="list-group-item list-group-item-action" data-book-title="검색된 도서 1">
                                검색된 도서 1
                            </a>
                            <a href="#" class="list-group-item list-group-item-action" data-book-title="검색된 도서 2">
                                검색된 도서 2
                            </a>
                        </div>
                    `);
                }
            });

            // 검색 결과 클릭 시 문의 도서 필드 업데이트
            $(document).on('click', '#searchResults .list-group-item', function(e) {
                e.preventDefault();
                const bookTitle = $(this).data('book-title');
                $('#title').val(bookTitle);
            });
            
            // Form submission
            $('#postForm').on('submit', function(e) {
                e.preventDefault();
                
                const title = $('#title').val();
                const postTitle = $('#postTitle').val();
                const content = $('#content').summernote('code');
                const allowComments = $('#allowComments').is(':checked');
                const visibility = $('input[name="visibility"]:checked').val();
                
                if (!title.trim()) {
                    alert('문의 도서를 선택해주세요.');
                    return;
                }

                if (!postTitle.trim()) {
                    alert('게시글 제목을 입력해주세요.');
                    return;
                }
                
                if (!content.trim()) {
                    alert('내용을 입력해주세요.');
                    return;
                }
                
                // 여기에 서버로 데이터를 전송하는 코드 추가
                console.log({
                    title,
                    postTitle,
                    content,
                    allowComments,
                    visibility
                });
                
                // 임시로 성공 메시지 표시
                alert('게시글이 등록되었습니다.');
                // 목록 페이지로 이동
                window.location.href = 'post-detail-bookInquiry.html';
            });
        });
    </script>
</body>
</html> 